<?xml version="1.0" encoding="utf-8"?>
<WatchFace width="450" height="450">
    <Metadata key="CLOCK_TYPE" value="DIGITAL"/>
    <Scene>
        // ACTIVE DISPLAY
        // -----------------------------------------------------------------------------------------
        <Group name="Active" x="0" y="0" width="450" height="450">
            <Variant mode="AMBIENT" target="alpha" value="0"/>

            // Background
            <PartImage x="0" y="0"  width="450" height="450">
                <Image resource="bg_dots"/>
            </PartImage>
            // Mid Lines
            <PartImage x="0" y="62" width="450" height="450">
                <Image resource="mid_lines"/>
            </PartImage>

            // Index Behind
            <Group name="Index_Behind" x="0" y="0" width="450" height="450">
                <Transform target="alpha" value="255 - [MILLISECOND]/1000*128"/>
                <SecondHand resource="" x="0" y="0" width="450" height="450">
                    <Tick duration="0" strength="0"/>
                    <PartDraw x="0" y="0" width="450" height="450">
                        <Line startX="225" startY="15" endX="225" endY="0">
                            <Stroke color="#FFD4D4D4" thickness="2"/>
                            <Transform target="startY" value="[SECOND] % 5 == 0 ? 30 : 15"/>
                        </Line>
                    </PartDraw>
                    <PartDraw x="0" y="0" width="450" height="450" angle="-6">
                        <Line startX="225" startY="15" endX="225" endY="0">
                            <Stroke color="#88D4D4D4" thickness="2"/>
                            <Transform target="startY" value="([SECOND] - 1) % 5 == 0 ? 30 : 15"/>
                        </Line>
                    </PartDraw>
                    <PartDraw x="0" y="0" width="450" height="450" angle="-12">
                        <Line startX="225" startY="15" endX="225" endY="0">
                            <Stroke color="#44D4D4D4" thickness="2"/>
                            <Transform target="startY" value="([SECOND] - 2) % 5 == 0 ? 30 : 15"/>
                        </Line>
                    </PartDraw>
                </SecondHand>
            </Group>
            // Index Forward
            <Group name="Index_Forward" x="0" y="0" width="450" height="450" alpha="128">
                <Transform target="alpha" value="128 + [MILLISECOND]/1000*128"/>
                <SecondHand resource="" x="0" y="0" width="450" height="450">
                    <Tick duration="0" strength="0"/>
                    <PartDraw x="0" y="0" width="450" height="450" angle="6">
                        <Line startX="225" startY="15" endX="225" endY="0">
                            <Stroke color="#FFD4D4D4" thickness="2"/>
                            <Transform target="startY" value="([SECOND] + 1) % 5 == 0 ? 30 : 15"/>
                        </Line>
                    </PartDraw>
                    <PartDraw x="0" y="0" width="450" height="450" angle="12">
                        <Line startX="225" startY="15" endX="225" endY="0">
                            <Stroke color="#88D4D4D4" thickness="2"/>
                            <Transform target="startY" value="([SECOND] + 2) % 5 == 0 ? 30 : 15"/>
                        </Line>
                    </PartDraw>
                    <PartDraw x="0" y="0" width="450" height="450" angle="18">
                        <Line startX="225" startY="15" endX="225" endY="0">
                            <Stroke color="#44D4D4D4" thickness="2"/>
                            <Transform target="startY" value="([SECOND] + 3) % 5 == 0 ? 30 : 15"/>
                        </Line>
                    </PartDraw>
                </SecondHand>
            </Group>
            // Second Hand
            <SecondHand resource="" x="0" y="0" width="450" height="450">
                <Sweep frequency="SYNC_TO_DEVICE"/>
                <PartDraw x="0" y="0" width="450" height="450">
                    <Arc centerX="225" centerY="225" height="450" width="450" startAngle="-180" endAngle="0">
                        <Stroke color="#FFD4D4D4" thickness="180">
                            <SweepGradient centerX="225" centerY="225" startAngle="-180" endAngle="0" colors="#00000000 #80D4D4D4" positions="0 1"/>
                        </Stroke>
                    </Arc>
                    <Line startX="225" startY="225" endX="225" endY="0">
                        <Stroke color="#FFD4D4D4" thickness="3"/>
                    </Line>
                </PartDraw>
            </SecondHand>

            // Hour
            <Condition>
                <Expressions>
                    <Expression name="Is_24h">[IS_24_HOUR_MODE]</Expression>
                </Expressions>
                <Compare expression="Is_24h">
                    <PartText x="53" y="106" width="220" height="220">
                        <Text>
                            <Font family="oswald_medium" size="180" color="#FF111111" weight="BOLD">
                                <Shadow color="#FFD1D0D0" offsetX="4" offsetY="3" radius="1">
                                    <Template>%d<Parameter expression="[HOUR_0_23]"/></Template>
                                </Shadow>
                            </Font>
                        </Text>
                    </PartText>
                </Compare>
                <Default>
                    <PartText x="53" y="106" width="220" height="220">
                        <Text>
                            <Font family="oswald_medium" size="180" color="#FF111111" weight="BOLD">
                                <Shadow color="#FFD1D0D0" offsetX="4" offsetY="3" radius="1">
                                    <Template>%d<Parameter expression="[HOUR_1_12]"/></Template>
                                </Shadow>
                            </Font>
                        </Text>
                    </PartText>
                </Default>
            </Condition>
            <Group name="HH" x="0" y="0" width="450" height="450">
                <Condition>
                    <Expressions>
                        <Expression name="Is_24h">[IS_24_HOUR_MODE]</Expression>
                    </Expressions>
                    <Compare expression="Is_24h">
                        <PartText x="53" y="106" width="220" height="220" renderMode="MASK">
                            <Text>
                                <Font family="oswald_medium" size="180" color="#FFFFFFFF" weight="BOLD">
                                    <Template>%d<Parameter expression="[HOUR_0_23]"/></Template>
                                </Font>
                            </Text>
                        </PartText>
                    </Compare>
                    <Default>
                        <PartText x="53" y="106" width="220" height="220" renderMode="MASK">
                            <Text>
                                <Font family="oswald_medium" size="180" color="#FFFFFFFF" weight="BOLD">
                                    <Template>%d<Parameter expression="[HOUR_1_12]"/></Template>
                                </Font>
                            </Text>
                        </PartText>
                    </Default>
                </Condition>
                <HourHand resource="mask" x="0" y="0" width="450" height="450" tintColor="#FFFF6A6A"/>
            </Group>

            // Minute
            <PartText x="240" y="205" width="110" height="110">
                <Text>
                    <Font family="oswald_medium" size="90" color="#FFD4D4D4">
                        <Template>%s<Parameter expression="[MINUTE_Z]"/></Template>
                    </Font>
                </Text>
            </PartText>

            // AM/PM
            <Condition>
                <Expressions>
                    <Expression name="Is_24h">[IS_24_HOUR_MODE]</Expression>
                    <Expression name="Is_AM">[AMPM_STATE] == 0</Expression>
                </Expressions>
                <Compare expression="Is_24h"/>
                <Compare expression="Is_AM">
                    <PartText x="345" y="215" width="60" height="60">
                        <Text>
                            <Font family="roboto_medium" size="40" color="#FFD4D4D4" weight="BOLD">AM</Font>
                        </Text>
                    </PartText>
                </Compare>
                <Default>
                    <PartText x="345" y="257" width="60" height="60">
                        <Text>
                            <Font family="roboto_medium" size="40" color="#FFD4D4D4" weight="BOLD">PM</Font>
                        </Text>
                    </PartText>
                </Default>
            </Condition>

            // Date
            <PartText x="240" y="135" width="110" height="50">
                <Text>
                    <Font family="roboto_medium" size="26" color="#FFFFFFFF">
                        <Upper>
                            <Template>%s<Parameter expression="[DAY_OF_WEEK_S]"/></Template>
                        </Upper>
                    </Font>
                </Text>
            </PartText>
            <PartText x="240" y="160" width="110" height="50">
                <Text>
                    <Font family="roboto_medium" size="26" color="#FFFFFFFF">
                        <Upper>
                            <Template>%s %s
                                <Parameter expression="[MONTH_S]"/>
                                <Parameter expression="[DAY_Z]"/>
                            </Template>
                        </Upper>
                    </Font>
                </Text>
            </PartText>

            // Battery Indicator
            // Indicator Background
            <PartDraw x="0" y="0" width="450" height="450">
                <RoundRectangle x="252" y="203" width="65" height="15" cornerRadiusX="7" cornerRadiusY="7">
                    <Fill color="#FF333333"/>
                </RoundRectangle>
            </PartDraw>
            // Indicator Fill
            <Group name="Battery_Indicator_Fill" x="0" y="0" width="450" height="450">
                <Condition>
                    <Expressions>
                        <Expression name="Charging">[BATTERY_CHARGING_STATUS]</Expression>
                        <Expression name="Under_50">[BATTERY_PERCENT] &lt; 50</Expression>
                        <Expression name="Under_20">[BATTERY_PERCENT] &lt; 20</Expression>
                    </Expressions>
                    <Compare expression="Charging">
                        <PartDraw x="0" y="0" width="450" height="450">
                            <RoundRectangle x="255" y="206" width="59" height="9" cornerRadiusX="5" cornerRadiusY="5">
                                <Fill color="#FF00D400"/>
                                <Transform target="width" value="[BATTERY_PERCENT]*0.59"/>
                            </RoundRectangle>
                        </PartDraw>
                    </Compare>
                    <Compare expression="Under_20">
                        <PartDraw x="0" y="0" width="450" height="450">
                            <RoundRectangle x="255" y="206" width="59" height="9" cornerRadiusX="5" cornerRadiusY="5">
                                <Fill color="#D50000"/>
                                <Transform target="width" value="[BATTERY_PERCENT]*0.59"/>
                            </RoundRectangle>
                        </PartDraw>
                    </Compare>
                    <Compare expression="Under_50">
                        <PartDraw x="0" y="0" width="450" height="450">
                            <RoundRectangle x="255" y="206" width="59" height="9" cornerRadiusX="5" cornerRadiusY="5">
                                <Fill color="#FF7043"/>
                                <Transform target="width" value="[BATTERY_PERCENT]*0.59"/>
                            </RoundRectangle>
                        </PartDraw>
                    </Compare>
                    <Default>
                        <PartDraw x="0" y="0" width="450" height="450">
                            <RoundRectangle x="255" y="206" width="59" height="9" cornerRadiusX="5" cornerRadiusY="5">
                                <Fill color="#FFD4D4D4"/>
                                <Transform target="width" value="[BATTERY_PERCENT]*0.59"/>
                            </RoundRectangle>
                        </PartDraw>
                    </Default>
                </Condition>
                <PartDraw x="0" y="0" width="450" height="450" renderMode="MASK">
                    <Line startX="255" startY="210.5" endX="314" endY="210.5">
                        <Stroke color="#FFFFFFFF" thickness="10" dashIntervals="4 2"/>
                    </Line>
                </PartDraw>
            </Group>

            // Battery Icon
            <PartDraw x="0" y="0" width="450" height="450">
                <Rectangle x="322" y="206" width="9" height="7.5">
                    <Fill color="#FFC0C0C0"/>
                </Rectangle>
                <Rectangle x="330" y="208" width="3" height="3.5">
                    <Fill color="#FFC0C0C0"/>
                </Rectangle>
            </PartDraw>

            // Heart Rate
            <PartImage x="335" y="130" width="80" height="80" scaleX="0.7" scaleY="0.7" tintColor="#B71C1C">
                <Image resource="icon_heart"/>
                <Transform target="scaleX" value="0.76 + sin(([UTC_TIMESTAMP] % (60000/[HEART_RATE])) / (60000/[HEART_RATE]) * 6.28) * 0.03"/>
                <Transform target="scaleY" value="0.76 + sin(([UTC_TIMESTAMP] % (60000/[HEART_RATE])) / (60000/[HEART_RATE]) * 6.28) * 0.03"/>
            </PartImage>
            <PartText x="334" y="129" width="80" height="80">
                <Text>
                    <Font family="roboto_medium" size="24" color="#FFE4E4E4" weight="BOLD">
                        <Template>%d<Parameter expression="[HEART_RATE]"/></Template>
                    </Font>
                </Text>
            </PartText>

            // Foreground
            <PartDraw x="0" y="0"  width="450" height="450">
                <Ellipse x="220" y="220" width="10" height="10">
                    <Fill color="#FF000000"/>
                    <Stroke color="#FFD4D4D4" thickness="2"/>
                </Ellipse>
            </PartDraw>

        </Group>

        // ALWAYS ON DISPLAY
        // -----------------------------------------------------------------------------------------
        <Group name="AOD" x="0" y="0" width="450" height="450" alpha="0">
            <Variant mode="AMBIENT" target="alpha" value="255"/>

            // Hour
            <Condition>
                <Expressions>
                    <Expression name="Is_24h">[IS_24_HOUR_MODE]</Expression>
                </Expressions>
                <Compare expression="Is_24h">
                    <PartText x="53" y="110" width="220" height="220">
                        <Text>
                            <Font family="oswald_medium" size="180" color="#00000000" weight="BOLD">
                                <Outline color="#FF333333" width="5">
                                    <Template>%d<Parameter expression="[HOUR_0_23]"/></Template>
                                </Outline>
                            </Font>
                        </Text>
                    </PartText>
                </Compare>
                <Default>
                    <PartText x="53" y="110" width="220" height="220">
                        <Text>
                            <Font family="oswald_medium" size="180" color="#00000000" weight="BOLD">
                                <Outline color="#FF333333" width="5">
                                    <Template>%d<Parameter expression="[HOUR_1_12]"/></Template>
                                </Outline>
                            </Font>
                        </Text>
                    </PartText>
                </Default>
            </Condition>
            <Group name="HH_AOD" x="0" y="0" width="450" height="450">
                <Condition>
                    <Expressions>
                        <Expression name="Is_24h">[IS_24_HOUR_MODE]</Expression>
                    </Expressions>
                    <Compare expression="Is_24h">
                        <PartText x="53" y="110" width="220" height="220" renderMode="MASK">
                            <Text>
                                <Font family="oswald_medium" size="180" color="#00000000" weight="BOLD">
                                    <Outline color="#FFFFFFFF" width="5">
                                        <Template>%d<Parameter expression="[HOUR_0_23]"/></Template>
                                    </Outline>
                                </Font>
                            </Text>
                        </PartText>
                    </Compare>
                    <Default>
                        <PartText x="53" y="110" width="220" height="220" renderMode="MASK">
                            <Text>
                                <Font family="oswald_medium" size="180" color="#00000000" weight="BOLD">
                                    <Outline color="#FFFFFFFF" width="5">
                                        <Template>%d<Parameter expression="[HOUR_1_12]"/></Template>
                                    </Outline>
                                </Font>
                            </Text>
                        </PartText>
                    </Default>
                </Condition>
                <HourHand resource="mask" x="0" y="0" width="450" height="450" tintColor="#FFFF6A6A"/>
            </Group>

            // Minute
            <PartText x="240" y="205" width="110" height="110">
                <Text>
                    <Font family="oswald_medium" size="90" color="#00000000">
                        <Outline color="#FFFFFFFF" width="3">
                            <Template>%s<Parameter expression="[MINUTE_Z]"/></Template>
                        </Outline>
                    </Font>
                </Text>
            </PartText>

            // AM/PM
            <Condition>
                <Expressions>
                    <Expression name="Is_24h">[IS_24_HOUR_MODE]</Expression>
                    <Expression name="Is_AM">[AMPM_STATE] == 0</Expression>
                </Expressions>
                <Compare expression="Is_24h"/>
                <Compare expression="Is_AM">
                    <PartText x="345" y="215" width="60" height="60">
                        <Text>
                            <Font family="roboto_medium" size="40" color="#FFFFFFFF" weight="LIGHT">AM</Font>
                        </Text>
                    </PartText>
                </Compare>
                <Default>
                    <PartText x="345" y="257" width="60" height="60">
                        <Text>
                            <Font family="roboto_medium" size="40" color="#FFFFFFFF" weight="LIGHT">PM</Font>
                        </Text>
                    </PartText>
                </Default>
            </Condition>

            // Date
            <PartText x="240" y="135" width="110" height="50">
                <Text>
                    <Font family="roboto_medium" size="26" color="#FFFFFFFF">
                        <Upper>
                            <Template>%s<Parameter expression="[DAY_OF_WEEK_S]"/></Template>
                        </Upper>
                    </Font>
                </Text>
            </PartText>
            <PartText x="240" y="160" width="110" height="50">
                <Text>
                    <Font family="roboto_medium" size="26" color="#FFFFFFFF">
                        <Upper>
                            <Template>%s %s
                                <Parameter expression="[MONTH_S]"/>
                                <Parameter expression="[DAY_Z]"/>
                            </Template>
                        </Upper>
                    </Font>
                </Text>
            </PartText>

        </Group>

    </Scene>
</WatchFace>